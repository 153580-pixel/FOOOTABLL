<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Football Prototype â€“ Phase 2</title>
<style>
  body { margin: 0; overflow: hidden; }
  #ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-family: Arial, sans-serif;
    background: rgba(0,0,0,0.45);
    padding: 10px;
    border-radius: 6px;
  }
</style>
</head>
<body>

<div id="ui">
  <div>WASD: Move</div>
  <div>SPACE: Throw</div>
  <div>Phase 2: Player Bodies</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

/* CAMERA */
const camera = new THREE.PerspectiveCamera(65, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 10, 18);

/* RENDERER */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

/* LIGHTING */
const sun = new THREE.DirectionalLight(0xffffff, 1.1);
sun.position.set(30, 50, 20);
sun.castShadow = true;
scene.add(sun);
scene.add(new THREE.AmbientLight(0xffffff, 0.4));

/* FIELD */
const field = new THREE.Mesh(
  new THREE.PlaneGeometry(53.3, 120),
  new THREE.MeshStandardMaterial({ color: 0x2e8b57 })
);
field.rotation.x = -Math.PI / 2;
field.receiveShadow = true;
scene.add(field);

/* FIELD LINES */
function addLine(z, width = 53.3) {
  const line = new THREE.Mesh(
    new THREE.PlaneGeometry(width, 0.4),
    new THREE.MeshStandardMaterial({ color: 0xffffff })
  );
  line.rotation.x = -Math.PI / 2;
  line.position.set(0, 0.01, z);
  scene.add(line);
}
for (let z = -50; z <= 50; z += 10) addLine(z);

/* PLAYER MODEL (REAL BODY) */
const player = new THREE.Group();

/* Helmet */
const helmet = new THREE.Mesh(
  new THREE.SphereGeometry(0.6, 16, 16),
  new THREE.MeshStandardMaterial({ color: 0x1e90ff })
);
helmet.position.y = 3.2;
helmet.castShadow = true;
player.add(helmet);

/* Torso + Pads */
const torso = new THREE.Mesh(
  new THREE.BoxGeometry(1.6, 1.8, 0.9),
  new THREE.MeshStandardMaterial({ color: 0x0033aa })
);
torso.position.y = 2.1;
torso.castShadow = true;
player.add(torso);

/* Legs */
const legGeo = new THREE.BoxGeometry(0.5, 1.6, 0.5);
const legMat = new THREE.MeshStandardMaterial({ color: 0xffffff });

const leftLeg = new THREE.Mesh(legGeo, legMat);
leftLeg.position.set(-0.4, 0.8, 0);
leftLeg.castShadow = true;

const rightLeg = leftLeg.clone();
rightLeg.position.x = 0.4;

player.add(leftLeg);
player.add(rightLeg);

/* Arms */
const armGeo = new THREE.BoxGeometry(0.4, 1.4, 0.4);
const armMat = new THREE.MeshStandardMaterial({ color: 0x0033aa });

const leftArm = new THREE.Mesh(armGeo, armMat);
leftArm.position.set(-1.1, 2.2, 0);
leftArm.castShadow = true;

const rightArm = leftArm.clone();
rightArm.position.x = 1.1;

player.add(leftArm);
player.add(rightArm);

player.position.set(0, 0, 40);
scene.add(player);

/* FOOTBALL */
let football = null;
let footballVelocity = new THREE.Vector3();

function throwFootball() {
  if (football) return;

  football = new THREE.Mesh(
    new THREE.SphereGeometry(0.35, 16, 16),
    new THREE.MeshStandardMaterial({ color: 0x8b4513 })
  );
  football.scale.set(1.5, 1, 1);
  football.position.copy(player.position);
  football.position.y = 2.5;
  football.castShadow = true;

  footballVelocity.set(0, 0.25, -0.85);
  scene.add(football);
}

/* CONTROLS */
const keys = {};
window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

let walkCycle = 0;

/* LOOP */
function animate() {
  requestAnimationFrame(animate);

  let moving = false;
  if (keys["w"]) { player.position.z -= 0.3; moving = true; }
  if (keys["s"]) { player.position.z += 0.3; moving = true; }
  if (keys["a"]) { player.position.x -= 0.3; moving = true; }
  if (keys["d"]) { player.position.x += 0.3; moving = true; }
  if (keys[" "]) throwFootball();

  /* Run animation */
  if (moving) {
    walkCycle += 0.15;
    leftLeg.rotation.x = Math.sin(walkCycle) * 0.6;
    rightLeg.rotation.x = Math.sin(walkCycle + Math.PI) * 0.6;
    leftArm.rotation.x = Math.sin(walkCycle + Math.PI) * 0.4;
    rightArm.rotation.x = Math.sin(walkCycle) * 0.4;
  } else {
    leftLeg.rotation.x = rightLeg.rotation.x = 0;
    leftArm.rotation.x = rightArm.rotation.x = 0;
  }

  if (football) {
    football.position.add(footballVelocity);
    footballVelocity.y -= 0.012;
    football.rotation.z += 0.25;
    if (football.position.y <= 0) {
      scene.remove(football);
      football = null;
    }
  }

  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 18;
  camera.lookAt(player.position.x, 2.5, player.position.z);

  renderer.render(scene, camera);
}

animate();
</script>
</body>
</html>

