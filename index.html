<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Football Prototype</title>
<style>
  body { margin: 0; overflow: hidden; background: #000; }
  #ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-family: Arial, sans-serif;
  }
</style>
</head>
<body>
<div id="ui">
  <div>WASD: Move</div>
  <div>SPACE: Throw</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a5c2e);

const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 10, 15);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Lights
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(10, 20, 10);
scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff, 0.5));

// Field
const field = new THREE.Mesh(
  new THREE.PlaneGeometry(50, 100),
  new THREE.MeshStandardMaterial({color: 0x2e8b57})
);
field.rotation.x = -Math.PI / 2;
scene.add(field);

// Player (QB)
const player = new THREE.Mesh(
  new THREE.BoxGeometry(1, 2, 1),
  new THREE.MeshStandardMaterial({color: 0x0047ab})
);
player.position.y = 1;
scene.add(player);

// Defender
const defenders = [];
for (let i = 0; i < 5; i++) {
  const d = new THREE.Mesh(
    new THREE.BoxGeometry(1, 2, 1),
    new THREE.MeshStandardMaterial({color: 0xaa0000})
  );
  d.position.set((Math.random()-0.5)*20, 1, -20 - i*5);
  defenders.push(d);
  scene.add(d);
}

// Ball
let ball = null;
let ballVelocity = new THREE.Vector3();

const keys = {};
window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

function throwBall() {
  if (ball) return;
  ball = new THREE.Mesh(
    new THREE.SphereGeometry(0.3, 16, 16),
    new THREE.MeshStandardMaterial({color: 0xffffff})
  );
  ball.position.copy(player.position);
  ballVelocity.set(0, 0.2, -0.6);
  scene.add(ball);
}

function animate() {
  requestAnimationFrame(animate);

  // Movement
  if (keys["w"]) player.position.z -= 0.2;
  if (keys["s"]) player.position.z += 0.2;
  if (keys["a"]) player.position.x -= 0.2;
  if (keys["d"]) player.position.x += 0.2;

  if (keys[" "]) throwBall();

  // Ball physics
  if (ball) {
    ball.position.add(ballVelocity);
    ballVelocity.y -= 0.01;
    if (ball.position.y <= 0) {
      scene.remove(ball);
      ball = null;
    }
  }

  // Defender AI
  defenders.forEach(d => {
    const dir = new THREE.Vector3().subVectors(player.position, d.position).normalize();
    d.position.add(dir.multiplyScalar(0.05));
  });

  // Camera follow
  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 15;
  camera.lookAt(player.position);

  renderer.render(scene, camera);
}

animate();
</script>
</body>
</html>
