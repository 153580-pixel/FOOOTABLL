<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Football Prototype – Phase 1</title>
<style>
  body { margin: 0; overflow: hidden; }
  #ui {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-family: Arial, sans-serif;
    background: rgba(0,0,0,0.4);
    padding: 8px;
    border-radius: 6px;
  }
</style>
</head>
<body>

<div id="ui">
  <div>WASD: Move</div>
  <div>SPACE: Throw</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb); // morning sky

/* CAMERA */
const camera = new THREE.PerspectiveCamera(
  65,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.set(0, 12, 18);

/* RENDERER */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

/* LIGHTING */
const sun = new THREE.DirectionalLight(0xffffff, 1.1);
sun.position.set(20, 40, 20);
sun.castShadow = true;
scene.add(sun);

scene.add(new THREE.AmbientLight(0xffffff, 0.4));

/* FIELD */
const field = new THREE.Mesh(
  new THREE.PlaneGeometry(53.3, 120),
  new THREE.MeshStandardMaterial({ color: 0x2e8b57 })
);
field.rotation.x = -Math.PI / 2;
field.receiveShadow = true;
scene.add(field);

/* FIELD LINES */
function addLine(z, width = 53.3) {
  const line = new THREE.Mesh(
    new THREE.PlaneGeometry(width, 0.4),
    new THREE.MeshStandardMaterial({ color: 0xffffff })
  );
  line.rotation.x = -Math.PI / 2;
  line.position.z = z;
  line.position.y = 0.01;
  scene.add(line);
}

// Yard lines
for (let z = -50; z <= 50; z += 10) {
  addLine(z);
}

// End zones
addLine(-58, 53.3);
addLine(58, 53.3);

/* PLAYER (QB – placeholder body) */
const player = new THREE.Mesh(
  new THREE.CapsuleGeometry(0.6, 1.4, 4, 8),
  new THREE.MeshStandardMaterial({ color: 0x0033aa })
);
player.position.set(0, 1.4, 40);
player.castShadow = true;
scene.add(player);

/* FOOTBALL */
let football = null;
let footballVelocity = new THREE.Vector3();

function throwFootball() {
  if (football) return;

  football = new THREE.Mesh(
    new THREE.SphereGeometry(0.35, 16, 16),
    new THREE.MeshStandardMaterial({ color: 0x8b4513 })
  );
  football.scale.set(1.5, 1, 1); // football shape
  football.position.copy(player.position);
  football.position.y += 0.5;
  football.castShadow = true;

  footballVelocity.set(0, 0.25, -0.8);
  scene.add(football);
}

/* CONTROLS */
const keys = {};
window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

/* ANIMATION LOOP */
function animate() {
  requestAnimationFrame(animate);

  if (keys["w"]) player.position.z -= 0.3;
  if (keys["s"]) player.position.z += 0.3;
  if (keys["a"]) player.position.x -= 0.3;
  if (keys["d"]) player.position.x += 0.3;
  if (keys[" "]) throwFootball();

  if (football) {
    football.position.add(footballVelocity);
    footballVelocity.y -= 0.012;
    football.rotation.z += 0.3;

    if (football.position.y <= 0) {
      scene.remove(football);
      football = null;
    }
  }

  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 18;
  camera.lookAt(player.position);

  renderer.render(scene, camera);
}

animate();
</script>
</body>
</html>

